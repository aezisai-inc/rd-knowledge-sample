# ğŸ§  Graphiti Ã— A2A Standard çµ±åˆè¨­è¨ˆæ›¸

> **æ™‚é–“èªè­˜å‹ãƒŠãƒ¬ãƒƒã‚¸ã‚°ãƒ©ãƒ•ã«ã‚ˆã‚‹ Agent ãƒ¡ãƒ¢ãƒªã‚·ã‚¹ãƒ†ãƒ **

## ğŸ“– æ¦‚è¦

### Graphiti ã¨ã¯

[Graphiti](https://github.com/getzep/graphiti) ã¯ã€AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå‘ã‘ã®æ™‚é–“èªè­˜å‹ãƒŠãƒ¬ãƒƒã‚¸ã‚°ãƒ©ãƒ•ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã€‚
å‹•çš„ãªç’°å¢ƒã§å‹•ä½œã™ã‚‹AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå°‚ç”¨ã«è¨­è¨ˆã•ã‚Œã¦ãŠã‚Šã€ä»¥ä¸‹ã®ç‰¹å¾´ã‚’æŒã¤ï¼š

- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å¢—åˆ†æ›´æ–°**: ãƒãƒƒãƒå‡¦ç†ä¸è¦ã€æ–°ãƒ‡ãƒ¼ã‚¿ã‚’å³æ™‚çµ±åˆ
- **åŒæ™‚é–“ãƒ¢ãƒ‡ãƒ«**: ã‚¤ãƒ™ãƒ³ãƒˆç™ºç”Ÿæ™‚åˆ» + ãƒ‡ãƒ¼ã‚¿å–ã‚Šè¾¼ã¿æ™‚åˆ»ã‚’å€‹åˆ¥è¿½è·¡
- **ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰æ¤œç´¢**: ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯ + ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ + ã‚°ãƒ©ãƒ•ãƒˆãƒ©ãƒãƒ¼ã‚µãƒ«
- **ã‚«ã‚¹ã‚¿ãƒ ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£**: Pydantic ãƒ¢ãƒ‡ãƒ«ã«ã‚ˆã‚‹æŸ”è»Ÿãªã‚ªãƒ³ãƒˆãƒ­ã‚¸ãƒ¼
- **MCP Server**: AI ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆçµ±åˆç”¨ MCP ã‚µãƒ¼ãƒãƒ¼ä»˜å±

### å‚è€ƒè³‡æ–™

- [GitHub: getzep/graphiti](https://github.com/getzep/graphiti)
- [æŠ€è¡“èª¿æŸ»è¨˜äº‹ (Zenn)](https://zenn.dev/suwash/articles/graphithi_20250605)

---

## ğŸ¯ A2A Standard ã¨ã®çµ±åˆãƒã‚¤ãƒ³ãƒˆ

### ç¾è¡Œã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¯”è¼ƒ

| æ©Ÿèƒ½ | ç¾è¡Œè¨­è¨ˆ (AgentCore) | Graphiti çµ±åˆå¾Œ |
|------|---------------------|-----------------|
| **çŸ­æœŸè¨˜æ†¶** | AgentCore Memory | AgentCore Memory (ç¶­æŒ) |
| **ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰è¨˜æ†¶** | AgentCore Memory | Graphiti EpisodicNode |
| **ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯è¨˜æ†¶** | AgentCore Memory | Graphiti EntityNode |
| **é–¢ä¿‚ã‚°ãƒ©ãƒ•** | Neptune (åˆ¥ã‚µãƒ¼ãƒ“ã‚¹) | Graphiti (Neo4j çµ±åˆ) |
| **æ™‚é–“è¿½è·¡** | eventTimestamp | åŒæ™‚é–“ãƒ¢ãƒ‡ãƒ« |
| **æ¤œç´¢** | å€‹åˆ¥å®Ÿè£…å¿…è¦ | ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰æ¤œç´¢çµ±åˆ |

### çµ±åˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    A2A Standard Platform                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ Frontend    â”‚     â”‚           Graphiti               â”‚      â”‚
â”‚  â”‚ (Next.js)   â”‚     â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜     â”‚  â”‚EntityNode  â”‚ â”‚EpisodicNodeâ”‚  â”‚      â”‚
â”‚         â”‚            â”‚  â”‚(Agentæƒ…å ±) â”‚ â”‚(ã‚¿ã‚¹ã‚¯å±¥æ­´)â”‚  â”‚      â”‚
â”‚         â–¼            â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â”‚      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚        â”‚              â”‚         â”‚      â”‚
â”‚  â”‚ Backend     â”‚â”€â”€â”€â”€>â”‚  â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”   â”‚      â”‚
â”‚  â”‚ (Express)   â”‚     â”‚  â”‚       EntityEdge         â”‚   â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜     â”‚  â”‚    (Agent é–“é–¢ä¿‚)        â”‚   â”‚      â”‚
â”‚         â”‚            â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚      â”‚
â”‚         â–¼            â”‚               â”‚                 â”‚      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚        â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”          â”‚      â”‚
â”‚  â”‚ Agents      â”‚â”€â”€â”€â”€>â”‚        â”‚   Neo4j     â”‚          â”‚      â”‚
â”‚  â”‚ (Strands)   â”‚     â”‚        â”‚   (Graph)   â”‚          â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚      â”‚
â”‚                      â”‚               â”‚                 â”‚      â”‚
â”‚                      â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚      â”‚
â”‚                      â”‚    â”‚   Hybrid Search     â”‚      â”‚      â”‚
â”‚                      â”‚    â”‚ Semantic+KW+Graph   â”‚      â”‚      â”‚
â”‚                      â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚      â”‚
â”‚                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                   AWS Infrastructure                     â”‚   â”‚
â”‚  â”‚  DynamoDB | EventBridge | Step Functions | Bedrock      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“‹ ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«è¨­è¨ˆ

### EntityNode (Agent ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£)

```python
class AgentEntity:
    """Agent ã‚’è¡¨ã™ EntityNode"""
    id: str                    # Agent ID
    name: str                  # è¡¨ç¤ºå
    version: str               # ãƒãƒ¼ã‚¸ãƒ§ãƒ³ (semver)
    trust_level: str           # ä¿¡é ¼ãƒ¬ãƒ™ãƒ«
    capabilities: list[str]    # èƒ½åŠ›ãƒªã‚¹ãƒˆ
    endpoint: str              # ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ URL
    status: str                # çŠ¶æ…‹ (active/inactive/deprecated)
    embedding: list[float]     # åå‰ãƒ»èª¬æ˜ã®åŸ‹ã‚è¾¼ã¿ãƒ™ã‚¯ãƒˆãƒ«
    created_at: datetime       # ç™»éŒ²æ—¥æ™‚
    updated_at: datetime       # æ›´æ–°æ—¥æ™‚
```

### EpisodicNode (ã‚¿ã‚¹ã‚¯å±¥æ­´)

```python
class TaskEpisode:
    """ã‚¿ã‚¹ã‚¯å®Ÿè¡Œã‚’è¡¨ã™ EpisodicNode"""
    task_id: str               # ã‚¿ã‚¹ã‚¯ ID
    agent_id: str              # å®Ÿè¡Œ Agent ID
    user_id: str               # ãƒ¦ãƒ¼ã‚¶ãƒ¼ ID
    session_id: str            # ã‚»ãƒƒã‚·ãƒ§ãƒ³ ID
    action: str                # å®Ÿè¡Œã‚¢ã‚¯ã‚·ãƒ§ãƒ³
    parameters: dict           # ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
    result_summary: str        # çµæœè¦ç´„
    status: str                # çŠ¶æ…‹ (completed/failed/cancelled)
    duration_ms: int           # å®Ÿè¡Œæ™‚é–“
    event_time: datetime       # ã‚¤ãƒ™ãƒ³ãƒˆç™ºç”Ÿæ™‚åˆ»
    ingestion_time: datetime   # ãƒ‡ãƒ¼ã‚¿å–ã‚Šè¾¼ã¿æ™‚åˆ»
```

### EntityEdge (Agent é–“é–¢ä¿‚)

```python
class AgentRelation:
    """Agent é–“ã®é–¢ä¿‚ã‚’è¡¨ã™ EntityEdge"""
    source_agent_id: str       # èµ·ç‚¹ Agent
    target_agent_id: str       # çµ‚ç‚¹ Agent
    relation_type: str         # é–¢ä¿‚ã‚¿ã‚¤ãƒ—
    # - DELEGATES_TO: ã‚¿ã‚¹ã‚¯å§”è­²
    # - DEPENDS_ON: ä¾å­˜é–¢ä¿‚
    # - ROUTES_TO: ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
    # - COLLABORATES_WITH: å”èª¿
    fact: str                  # é–¢ä¿‚ã®è‡ªç„¶è¨€èªè¨˜è¿°
    valid_from: datetime       # æœ‰åŠ¹é–‹å§‹æ—¥æ™‚
    valid_to: datetime         # æœ‰åŠ¹çµ‚äº†æ—¥æ™‚ (null = ç¾åœ¨æœ‰åŠ¹)
```

---

## ğŸš€ AWS ãƒ‡ãƒ—ãƒ­ã‚¤æ§‹æˆ

### Option A: ECS + Neo4j EC2 (æ¨å¥¨)

```yaml
resources:
  neo4j:
    type: EC2
    instance: t3.medium
    storage: EBS 50GB (gp3)
    cost: ~$40/æœˆ
    
  graphiti_service:
    type: Fargate
    cpu: 0.5 vCPU
    memory: 1GB
    cost: ~$30/æœˆ
    
  load_balancer:
    type: ALB (internal)
    cost: ~$20/æœˆ
    
  total_cost: ~$90-120/æœˆ
```

### Option B: Lambda + AuraDB (ä½ã‚³ã‚¹ãƒˆ)

```yaml
resources:
  neo4j:
    type: AuraDB Free Tier
    limitation: 50MB storage, 1 instance
    cost: $0
    
  graphiti_client:
    type: Lambda Layer
    integration: Agents Lambda ã«çµ±åˆ
    cost: ~$5/æœˆ (è¿½åŠ )
    
  total_cost: ~$5-15/æœˆ
```

### CDK Stack æ§‹æˆ

```
infra/lib/stacks/
â”œâ”€â”€ graphiti-stack.ts      # Neo4j + Graphiti Service (ECS)
â””â”€â”€ (æ—¢å­˜ stacks)
```

---

## ğŸ”§ å®Ÿè£…è¨ˆç”»

### Phase 1: ãƒ­ãƒ¼ã‚«ãƒ« PoC (å®Œäº†)

- [x] docker-compose.graphiti.yml ä½œæˆ
- [x] Dockerfile.graphiti ä½œæˆ
- [x] Python ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ (graphiti_client.py) å®Ÿè£…
- [x] README.md ä½œæˆ

### Phase 2: AWS ãƒ‡ãƒ—ãƒ­ã‚¤

- [ ] graphiti-stack.ts CDK Stack ãƒ‡ãƒ—ãƒ­ã‚¤
- [ ] Secrets Manager è¨­å®š (Neo4jèªè¨¼æƒ…å ±)
- [ ] CloudWatch ãƒ­ã‚°ãƒ»ãƒ¡ãƒˆãƒªã‚¯ã‚¹è¨­å®š
- [ ] ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ãƒ»ã‚¢ãƒ©ãƒ¼ãƒˆè¨­å®š

### Phase 3: Agent çµ±åˆ

- [ ] registry-agent ã« Graphiti é€£æºè¿½åŠ 
- [ ] gateway-agent ã«ã‚¿ã‚¹ã‚¯å±¥æ­´è¨˜éŒ²è¿½åŠ 
- [ ] orchestration-agent ã«é–¢ä¿‚ã‚°ãƒ©ãƒ•æ›´æ–°è¿½åŠ 
- [ ] Backend API ã«æ¤œç´¢ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆè¿½åŠ 

### Phase 4: Frontend çµ±åˆ

- [ ] çŸ¥è­˜ã‚°ãƒ©ãƒ•å¯è¦–åŒ–ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- [ ] Agent é–¢ä¿‚å›³è¡¨ç¤º
- [ ] ã‚¿ã‚¹ã‚¯å±¥æ­´ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³

---

## ğŸ“Š è©•ä¾¡æŒ‡æ¨™

### æ©Ÿèƒ½è©•ä¾¡

| é …ç›® | ç›®æ¨™ | æ¸¬å®šæ–¹æ³• |
|------|------|----------|
| æ¤œç´¢ç²¾åº¦ | 80%+ | æ‰‹å‹•è©•ä¾¡ (10 ã‚¯ã‚¨ãƒª) |
| æ¤œç´¢ãƒ¬ã‚¤ãƒ†ãƒ³ã‚· | <500ms | P95 æ¸¬å®š |
| ã‚°ãƒ©ãƒ•æ§‹ç¯‰æ™‚é–“ | <1s/episode | å¹³å‡æ¸¬å®š |
| æ™‚ç³»åˆ—ã‚¯ã‚¨ãƒªç²¾åº¦ | 95%+ | æ™‚ç‚¹ã‚¯ã‚¨ãƒªãƒ†ã‚¹ãƒˆ |

### ã‚³ã‚¹ãƒˆè©•ä¾¡

| æ§‹æˆ | æœˆé¡ã‚³ã‚¹ãƒˆ | é©ç”¨ã‚·ãƒŠãƒªã‚ª |
|------|-----------|-------------|
| ãƒ­ãƒ¼ã‚«ãƒ«ã®ã¿ | $0 | é–‹ç™ºãƒ»PoC |
| Lambda + AuraDB | ~$15 | è»½é‡æœ¬ç•ª |
| ECS + Neo4j | ~$100 | æœ¬ç•ªæ¨å¥¨ |

---

## ğŸ”— é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [MEMORY_ARCHITECTURE_DESIGN.md](./MEMORY_ARCHITECTURE_DESIGN.md) - AgentCore ãƒ¡ãƒ¢ãƒªè¨­è¨ˆ
- [ARCHITECTURE.md](../../30-client/client-dc/rd-a2a-standard/ARCHITECTURE.md) - A2A å…¨ä½“ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
- [agents/core/graphiti-integration/](../../30-client/client-dc/rd-a2a-standard/agents/core/graphiti-integration/) - å®Ÿè£…ã‚³ãƒ¼ãƒ‰

---

## ğŸ“… æ›´æ–°å±¥æ­´

| æ—¥ä»˜ | å†…å®¹ |
|------|------|
| 2025-12-25 | åˆç‰ˆä½œæˆ: Graphiti èª¿æŸ»ãƒ»çµ±åˆè¨­è¨ˆ |

