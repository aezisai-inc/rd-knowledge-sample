# RDRA 要件分析ドキュメント

## 1. システムコンテキスト

### 1.1 システム概要

rd-knowledge-sample は AWS Nova シリーズの技術検証プロジェクト。
AgentCore + StrandsAgents + Bedrock API を活用した AI エージェントシステム。

### 1.2 ステークホルダー

| ステークホルダー | 役割 | 関心事 |
|-----------------|------|--------|
| 開発者 | AI 機能検証 | Nova モデルの性能・使用感 |
| プロダクトオーナー | 技術選定 | 本番採用可否の判断材料 |
| インフラ担当 | 運用設計 | コスト・スケーラビリティ |

### 1.3 外部システム

```
┌─────────────────────────────────────────────────────────────┐
│                External Systems                              │
├─────────────────────────────────────────────────────────────┤
│  AWS Bedrock                                                 │
│  ├─ Nova Lite/Pro (テキスト生成)                             │
│  ├─ Nova Canvas (画像生成)                                   │
│  ├─ Nova Reel (動画生成)                                     │
│  └─ Nova Sonic (音声対話)                                    │
├─────────────────────────────────────────────────────────────┤
│  AgentCore Services                                          │
│  ├─ AgentCore Memory (セッション管理)                        │
│  └─ AgentCore Runtime (エージェント実行)                     │
├─────────────────────────────────────────────────────────────┤
│  Storage Services                                            │
│  ├─ S3 (オブジェクトストレージ)                              │
│  └─ DynamoDB (メタデータ) [オプション]                       │
└─────────────────────────────────────────────────────────────┘
```

## 2. ビジネス要件

### 2.1 ビジネス目標

1. **技術検証**: AWS Nova シリーズの機能・性能を評価
2. **パターン確立**: AI エージェント開発のベストプラクティス構築
3. **コスト最適化**: OpenSearch を使用せずに低コストで実現

### 2.2 成功指標

| 指標 | 目標値 | 測定方法 |
|------|--------|----------|
| Memory レイテンシ | < 200ms | CloudWatch |
| Multimodal 処理時間 | < 5s | E2E テスト |
| 月額コスト | < $50 | Cost Explorer |

## 3. 機能要件

### 3.1 Memory サービス

| ID | 機能 | 優先度 | 詳細 |
|----|------|--------|------|
| MEM-001 | セッション作成 | 高 | 新規会話セッションを開始 |
| MEM-002 | イベント追加 | 高 | 発話/行動をセッションに記録 |
| MEM-003 | セッション終了 | 中 | セッションを終了して保存 |
| MEM-004 | 履歴検索 | 中 | 過去のセッションを検索 |

### 3.2 Search サービス

| ID | 機能 | 優先度 | 詳細 |
|----|------|--------|------|
| SRC-001 | ベクトル検索 | 高 | セマンティック検索 |
| SRC-002 | ドキュメント登録 | 中 | 検索対象の登録 |
| SRC-003 | ハイブリッド検索 | 低 | キーワード + ベクトル |

### 3.3 Agent サービス

| ID | 機能 | 優先度 | 詳細 |
|----|------|--------|------|
| AGT-001 | Multimodal 対話 | 高 | テキスト + 画像処理 |
| AGT-002 | 画像生成 | 高 | Nova Canvas による生成 |
| AGT-003 | 音声対話 | 中 | Nova Sonic による対話 |
| AGT-004 | 動画生成 | 低 | Nova Reel による生成 |

## 4. 非機能要件

### 4.1 パフォーマンス

- API レスポンス: p99 < 500ms
- 同時接続数: 100 ユーザー

### 4.2 可用性

- サービス稼働率: 99.5%
- RTO: 1 時間
- RPO: 0（イベントソーシング）

### 4.3 セキュリティ

- IAM による認証・認可
- データ暗号化（転送中・保存時）
- CloudTrail による監査ログ

### 4.4 コスト

- 月額予算: $50 以下
- OpenSearch 不使用（高コスト回避）
- S3 Vector Store 優先

## 5. 制約条件

### 5.1 技術的制約

- AgentCore + StrandsAgents 必須
- Boto3/CLI 直接使用禁止
- OpenSearch 原則不使用

### 5.2 組織的制約

- 開発期間: 2 週間
- チームサイズ: 1 名

## 6. 用語集

| 用語 | 定義 |
|------|------|
| Session | 一連の会話やり取りの単位 |
| MemoryEvent | セッション内の個々の発話・行動 |
| Actor | ユーザーまたは AI エージェント |
| AgentCore | AWS の AI エージェント基盤サービス |
| StrandsAgents | モデル駆動型 AI エージェントフレームワーク |

---

**作成日**: 2026-01-03
**更新日**: 2026-01-03
