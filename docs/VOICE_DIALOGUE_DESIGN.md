# Voice Dialogue ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹è¨­è¨ˆæ›¸

## ğŸ“‹ æ¦‚è¦

| é …ç›® | å†…å®¹ |
|------|------|
| **ã‚¿ã‚¹ã‚¯ID** | TASK-050 ã€œ TASK-056 |
| **ç›®çš„** | AWS Nova Sonic ã‚’æ´»ç”¨ã—ãŸãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ éŸ³å£°å¯¾è©±ã®æŠ€è¡“æ¤œè¨¼ |
| **ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£** | **StrandsAgents + AgentCore + Nova Sonic** |
| **å¯¾è±¡ãƒ¢ãƒ‡ãƒ«** | Amazon Nova 2 Sonic (`amazon.nova-2-sonic-v1:0`) |
| **ä½œæˆæ—¥** | 2026-01-02 |

---

## âš ï¸ è¨­è¨ˆåŸå‰‡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Agentic ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé–‹ç™ºåŸºæº–                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  âœ… å¿…é ˆ: AgentCore + StrandsAgents + BedrockAPI               â”‚
â”‚  âœ… å¿…é ˆ: AgentCore_Observability / CloudTrail è¿½è·¡å¯èƒ½        â”‚
â”‚  âœ… å¿…é ˆ: AgentCore_Memory + S3Vector (ã‚³ã‚¹ãƒˆæœ€å°)             â”‚
â”‚  âœ… å¿…é ˆ: Nova Sonic ã®åŒæ–¹å‘ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚° API ä½¿ç”¨            â”‚
â”‚  âŒ ç¦æ­¢: boto3 / cli / script / sh ã§ã®ç›´æ¥å‡¦ç†               â”‚
â”‚  âŒ ç¦æ­¢: å€‹åˆ¥ã® Transcribe + Polly å‘¼ã³å‡ºã—                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ æ¤œè¨¼ç›®æ¨™

### Nova Sonic ã®ç‰¹å¾´

| ç‰¹å¾´ | èª¬æ˜ |
|------|------|
| **Speech-to-Speech** | å˜ä¸€ãƒ¢ãƒ‡ãƒ«ã§éŸ³å£°ç†è§£ãƒ»ç”Ÿæˆã‚’çµ±åˆ |
| **åŒæ–¹å‘ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°** | ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ä¼šè©±ã‚’å®Ÿç¾ |
| **è‡ªç„¶ãªã‚¿ãƒ¼ãƒ³ãƒ†ã‚¤ã‚­ãƒ³ã‚°** | ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å‰²ã‚Šè¾¼ã¿ã«å¯¾å¿œ |
| **å¤šè¨€èªå¯¾å¿œ** | è‹±èªã€ã‚¹ãƒšã‚¤ãƒ³èªã€ãƒ•ãƒ©ãƒ³ã‚¹èªã€ã‚¤ã‚¿ãƒªã‚¢èªã€ãƒ‰ã‚¤ãƒ„èª |
| **ä½ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·** | æ¥­ç•Œæœ€é«˜æ°´æº–ã®å¿œç­”é€Ÿåº¦ |
| **ãƒ„ãƒ¼ãƒ«å‘¼ã³å‡ºã—** | Agentic ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’ã‚µãƒãƒ¼ãƒˆ |

### æ¤œè¨¼é …ç›®

| # | æ©Ÿèƒ½ | èª¬æ˜ | å„ªå…ˆåº¦ |
|---|------|------|--------|
| 1 | **åŸºæœ¬ä¼šè©±** | éŸ³å£°å…¥åŠ› â†’ AIå¿œç­” â†’ éŸ³å£°å‡ºåŠ› | é«˜ |
| 2 | **æ–‡è„ˆä¿æŒ** | AgentCore Memory ã¨ã®é€£æº | é«˜ |
| 3 | **ãƒ„ãƒ¼ãƒ«å‘¼ã³å‡ºã—** | éŸ³å£°ã‹ã‚‰ã® Tool å®Ÿè¡Œ | ä¸­ |
| 4 | **å¤šè¨€èªå¯¾å¿œ** | è‹±èªãƒ»æ—¥æœ¬èªåˆ‡ã‚Šæ›¿ãˆ | ä¸­ |
| 5 | **å‰²ã‚Šè¾¼ã¿å‡¦ç†** | ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç™ºè©±å‰²ã‚Šè¾¼ã¿ | ä½ |

---

## ğŸ—ï¸ ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### Nova Sonic + AgentCore æ§‹æˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Next.js Frontend                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                   Voice Dialogue UI                       â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚   â”‚
â”‚  â”‚  â”‚ ãƒã‚¤ã‚¯å…¥åŠ› â”‚        â”‚ éŸ³å£°å‡ºåŠ›   â”‚                    â”‚   â”‚
â”‚  â”‚  â”‚ (getUserMedia)      â”‚ (Audio API)â”‚                    â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”˜                    â”‚   â”‚
â”‚  â”‚        â”‚                     â”‚                            â”‚   â”‚
â”‚  â”‚        â–¼                     â”‚                            â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚   â”‚
â”‚  â”‚  â”‚         WebSocket Client            â”‚                 â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚ WebSocket (wss://)
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   AgentCore Runtime                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚           StrandsAgents Voice Agent                      â”‚    â”‚
â”‚  â”‚                                                          â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚
â”‚  â”‚  â”‚  Bidirectional Streaming Agent                     â”‚ â”‚    â”‚
â”‚  â”‚  â”‚  - Session Management                              â”‚ â”‚    â”‚
â”‚  â”‚  â”‚  - Audio Chunk Processing                          â”‚ â”‚    â”‚
â”‚  â”‚  â”‚  - Event Protocol Handling                         â”‚ â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚
â”‚  â”‚                                                          â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚
â”‚  â”‚  â”‚  Nova Sonic Integration                            â”‚ â”‚    â”‚
â”‚  â”‚  â”‚  - InvokeModelWithBidirectionalStream              â”‚ â”‚    â”‚
â”‚  â”‚  â”‚  - Audio Input Events                              â”‚ â”‚    â”‚
â”‚  â”‚  â”‚  - Audio Output Events                             â”‚ â”‚    â”‚
â”‚  â”‚  â”‚  - Tool Use Events                                 â”‚ â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚
â”‚  â”‚                                                          â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚
â”‚  â”‚  â”‚  AgentCore Memory                                  â”‚ â”‚    â”‚
â”‚  â”‚  â”‚  - Session History                                 â”‚ â”‚    â”‚
â”‚  â”‚  â”‚  - User Preferences                                â”‚ â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Amazon Bedrock                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Nova 2 Sonic (amazon.nova-2-sonic-v1:0)                   â”‚ â”‚
â”‚  â”‚  - Speech Understanding                                     â”‚ â”‚
â”‚  â”‚  - Speech Generation                                        â”‚ â”‚
â”‚  â”‚  - Real-time Transcription                                  â”‚ â”‚
â”‚  â”‚  - Tool Use Support                                         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ StrandsAgents å®Ÿè£…è¨­è¨ˆ

### ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

```
src/agents/
â”œâ”€â”€ __init__.py
â”œâ”€â”€ voice_agent.py           # Voice Dialogue Agent
â”œâ”€â”€ voice_runtime.py         # AgentCore Runtime Entry Point
â””â”€â”€ tools/
    â””â”€â”€ voice_tools.py       # éŸ³å£°ç‰¹åŒ– Tools
```

### voice_agent.py

```python
"""
Voice Dialogue Agent using StrandsAgents + Nova Sonic

Nova 2 Sonic ã«ã‚ˆã‚‹åŒæ–¹å‘ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°éŸ³å£°å¯¾è©±ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã€‚
"""

from strands import Agent
from strands.models import BedrockModel
from strands_agents.bidirectional import BidirectionalAgent

from .config import create_session_manager


# Nova Sonic Model Configuration
NOVA_SONIC_MODEL_ID = "amazon.nova-2-sonic-v1:0"

# System Prompt for Voice Agent
SYSTEM_PROMPT = """ã‚ãªãŸã¯è¦ªåˆ‡ã§çŸ¥è­˜è±Šå¯ŒãªéŸ³å£°ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã§ã™ã€‚

## æŒ‡ç¤º
1. ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è³ªå•ã«æ˜ç¢ºã‹ã¤ç°¡æ½”ã«ç­”ãˆã‚‹
2. è¤‡é›‘ãªå†…å®¹ã¯æ®µéšçš„ã«èª¬æ˜ã™ã‚‹
3. ä¸æ˜ãªç‚¹ã¯ç¢ºèªã®è³ªå•ã‚’ã™ã‚‹
4. è‡ªç„¶ãªä¼šè©±ã®ãƒˆãƒ¼ãƒ³ã‚’ç¶­æŒã™ã‚‹

## æ³¨æ„
- éŸ³å£°å‡ºåŠ›ã«é©ã—ãŸé•·ã•ã§å›ç­”ã™ã‚‹ï¼ˆé•·ã™ããªã„ï¼‰
- æ•°å­—ã‚„å›ºæœ‰åè©ã¯æ˜ç¢ºã«ç™ºéŸ³ã™ã‚‹
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å‰²ã‚Šè¾¼ã¿ã«ã¯æŸ”è»Ÿã«å¯¾å¿œã™ã‚‹
"""


class VoiceDialogueAgent:
    """
    Nova Sonic ã‚’ä½¿ç”¨ã—ãŸéŸ³å£°å¯¾è©±ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ

    Features:
    - åŒæ–¹å‘ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ã«ã‚ˆã‚‹ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ä¼šè©±
    - AgentCore Memory ã«ã‚ˆã‚‹ä¼šè©±å±¥æ­´ç®¡ç†
    - ãƒ„ãƒ¼ãƒ«å‘¼ã³å‡ºã—ã«ã‚ˆã‚‹æ‹¡å¼µæ©Ÿèƒ½
    """

    def __init__(
        self,
        actor_id: str = "",
        session_id: str = "",
        use_memory: bool = True,
        voice_id: str = "ruth",  # or "matthew", "tiffany", etc.
        language: str = "en-US",
    ):
        self.actor_id = actor_id
        self.session_id = session_id
        self.use_memory = use_memory
        self.voice_id = voice_id
        self.language = language
        self._agent = None
        self._initialize()

    def _initialize(self):
        """ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’åˆæœŸåŒ–"""
        # Session Manager (AgentCore Memory)
        session_manager = None
        if self.use_memory:
            try:
                session_manager = create_session_manager(
                    actor_id=self.actor_id,
                    session_id=self.session_id,
                )
            except Exception as e:
                print(f"Warning: Failed to initialize memory: {e}")

        # Bidirectional Agent for Nova Sonic
        self._agent = BidirectionalAgent(
            model_id=NOVA_SONIC_MODEL_ID,
            system_prompt=SYSTEM_PROMPT,
            session_manager=session_manager,
            voice_config={
                "voiceId": self.voice_id,
                "language": self.language,
            },
        )

    async def start_session(self):
        """éŸ³å£°ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’é–‹å§‹"""
        return await self._agent.start_session()

    async def send_audio(self, audio_chunk: bytes):
        """éŸ³å£°ãƒãƒ£ãƒ³ã‚¯ã‚’é€ä¿¡"""
        return await self._agent.send_audio(audio_chunk)

    async def receive_audio(self):
        """éŸ³å£°ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’å—ä¿¡"""
        async for event in self._agent.receive_events():
            yield event

    async def end_session(self):
        """éŸ³å£°ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’çµ‚äº†"""
        return await self._agent.end_session()
```

---

## ğŸ“¡ ã‚¤ãƒ™ãƒ³ãƒˆãƒ—ãƒ­ãƒˆã‚³ãƒ«

### Nova Sonic ã‚¤ãƒ™ãƒ³ãƒˆå½¢å¼

#### å…¥åŠ›ã‚¤ãƒ™ãƒ³ãƒˆ

```json
// 1. ã‚»ãƒƒã‚·ãƒ§ãƒ³é–‹å§‹
{
  "event": {
    "sessionStart": {
      "inferenceConfiguration": {
        "maxTokens": 1024,
        "topP": 0.9,
        "temperature": 0.7
      }
    }
  }
}

// 2. éŸ³å£°å…¥åŠ›
{
  "event": {
    "audioInput": {
      "audioChunk": "<base64-encoded-audio>"
    }
  }
}

// 3. ã‚»ãƒƒã‚·ãƒ§ãƒ³çµ‚äº†
{
  "event": {
    "sessionEnd": {}
  }
}
```

#### å‡ºåŠ›ã‚¤ãƒ™ãƒ³ãƒˆ

```json
// 1. ãƒ†ã‚­ã‚¹ãƒˆè»¢å†™
{
  "event": {
    "textOutput": {
      "text": "ã“ã‚“ã«ã¡ã¯"
    }
  }
}

// 2. éŸ³å£°å‡ºåŠ›
{
  "event": {
    "audioOutput": {
      "audioChunk": "<base64-encoded-audio>"
    }
  }
}

// 3. ãƒ„ãƒ¼ãƒ«å‘¼ã³å‡ºã—
{
  "event": {
    "toolUse": {
      "toolUseId": "tool-123",
      "name": "get_weather",
      "input": {"location": "Tokyo"}
    }
  }
}
```

---

## ğŸ¨ UI è¨­è¨ˆ

### Voice Dialogue Tester ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

```tsx
// app/components/Voice/VoiceDialogueTester.tsx

interface VoiceDialogueTesterProps {
  apiBaseUrl: string;
}

// ä¸»è¦æ©Ÿèƒ½:
// 1. ãƒã‚¤ã‚¯å…¥åŠ›ï¼ˆgetUserMedia APIï¼‰
// 2. WebSocket æ¥ç¶šç®¡ç†
// 3. éŸ³å£°æ³¢å½¢è¡¨ç¤º
// 4. ä¼šè©±ãƒ­ã‚°è¡¨ç¤º
// 5. éŸ³å£°å‡ºåŠ›ï¼ˆAudio APIï¼‰
```

### UI ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ™ï¸ Voice Dialogue Tester                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚          éŸ³å£°æ³¢å½¢ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ©ã‚¤ã‚¶ãƒ¼            â”‚   â”‚
â”‚  â”‚         ~~~~~~~~~~~~~~~~~~~~~~~~~~~~        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ä¼šè©±ãƒ­ã‚°                                   â”‚   â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚   â”‚
â”‚  â”‚  ğŸ§‘ You: ã“ã‚“ã«ã¡ã¯                         â”‚   â”‚
â”‚  â”‚  ğŸ¤– AI: ã“ã‚“ã«ã¡ã¯ï¼ä½•ã‹ãŠæ‰‹ä¼ã„ã—ã¾ã—ã‚‡ã†ã‹ï¼Ÿâ”‚   â”‚
â”‚  â”‚  ğŸ§‘ You: ä»Šæ—¥ã®å¤©æ°—ã‚’æ•™ãˆã¦                 â”‚   â”‚
â”‚  â”‚  ğŸ¤– AI: æ±äº¬ã®å¤©æ°—ã¯æ™´ã‚Œã§ã™ã€‚             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚  ğŸ¤ éŒ²éŸ³é–‹å§‹  â”‚  â”‚  â¹ï¸ åœæ­¢     â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                                     â”‚
â”‚  è¨­å®š: è¨€èª [English â–¼] éŸ³å£° [Ruth â–¼]             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ’° ã‚³ã‚¹ãƒˆè¦‹ç©ã‚‚ã‚Š

### Nova Sonic æ–™é‡‘

| é …ç›® | æ–™é‡‘ |
|------|------|
| éŸ³å£°å…¥åŠ› | $0.0006 / ç§’ |
| éŸ³å£°å‡ºåŠ› | $0.0024 / ç§’ |

### æœˆé¡æ¦‚ç®—ï¼ˆæ¤œè¨¼ç”¨é€”ï¼‰

| ã‚µãƒ¼ãƒ“ã‚¹ | æœˆé¡ | å‚™è€ƒ |
|---------|------|------|
| Nova Sonic (å…¥åŠ›) | ~$10 | 1æ—¥30åˆ† Ã— 30æ—¥ |
| Nova Sonic (å‡ºåŠ›) | ~$40 | 1æ—¥30åˆ† Ã— 30æ—¥ |
| AgentCore Runtime | ~$50 | WebSocket æ¥ç¶š |
| AgentCore Memory | ~$10 | ã‚»ãƒƒã‚·ãƒ§ãƒ³è¨˜æ†¶ |
| **åˆè¨ˆ** | **~$110/æœˆ** | |

---

## âœ… å®Ÿè£…ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### Phase 8 ã‚¿ã‚¹ã‚¯

- [x] TASK-050: Voice Dialogue èª¿æŸ»ãƒ»è¨­è¨ˆ (æœ¬ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ)
- [ ] TASK-051: Voice Agent å®Ÿè£… (StrandsAgents + Nova Sonic)
- [ ] TASK-052: WebSocket Handler å®Ÿè£…
- [ ] TASK-053: Voice UI å®Ÿè£…
- [ ] TASK-054: AgentCore Memory çµ±åˆ
- [ ] TASK-055: ãƒ„ãƒ¼ãƒ«å‘¼ã³å‡ºã—å®Ÿè£…
- [ ] TASK-056: Voice UI çµ±åˆ

---

## ğŸ“š å‚è€ƒãƒªãƒ³ã‚¯

### Nova Sonic
- [Amazon Nova Sonic User Guide](https://docs.aws.amazon.com/nova/latest/userguide/speech.html)
- [Nova 2 Sonic Announcement](https://aws.amazon.com/blogs/aws/introducing-amazon-nova-2-sonic-next-generation-speech-to-speech-model-for-conversational-ai/)
- [Nova Speech Models](https://aws.amazon.com/nova/speech/)

### StrandsAgents
- [Bidirectional Streaming Agent](https://aws.amazon.com/blogs/machine-learning/bi-directional-streaming-for-real-time-agent-interactions-now-available-in-amazon-bedrock-agentcore-runtime/)
- [Multi-agent Voice Assistant](https://aws.amazon.com/blogs/machine-learning/building-a-multi-agent-voice-assistant-with-amazon-nova-sonic-and-amazon-bedrock-agentcore/)

### Web APIs
- [MediaDevices.getUserMedia()](https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getUserMedia)
- [WebSocket API](https://developer.mozilla.org/en-US/docs/Web/API/WebSocket)
- [Web Audio API](https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API)

